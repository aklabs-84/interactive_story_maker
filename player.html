<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>â–¶ï¸ ìŠ¤í† ë¦¬ ì²´í—˜ - ì¸í„°ë™í‹°ë¸Œ ìŠ¤í† ë¦¬ ë©”ì´ì»¤</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/tone/14.8.49/Tone.js"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Pretendard:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="css/common.css">
  <style>
    /* ê³µìœ  ëª¨ë“œì—ì„œ ë„¤ë¹„ê²Œì´ì…˜ ìˆ¨ê¸°ê¸° */
    body.shared-mode .main-nav { display: none; }
    body.shared-mode .mobile-nav { display: none; }
  </style>
</head>
<body>
  <div id="animationLayer" class="animation-layer"></div>

  <div class="relative z-10 min-h-screen flex flex-col">
    <!-- í—¤ë” -->
    <header class="header-wrapper sticky top-0 z-50">
      <div class="header-inner max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="flex items-center justify-between h-16 md:h-20 gap-4">
          <!-- ë¡œê³  -->
          <a href="index.html" class="flex items-center gap-3 flex-shrink-0">
            <div class="w-10 h-10 rounded-xl bg-gradient-to-br from-purple-400 to-pink-500 flex items-center justify-center shadow-lg">
              <span class="text-xl">â–¶ï¸</span>
            </div>
            <div class="hidden sm:block">
              <h1 class="text-lg font-bold tracking-tight" id="pageTitle">ìŠ¤í† ë¦¬ ì²´í—˜</h1>
              <p class="text-xs text-slate-400" id="pageSubtitle">ì¸í„°ë™í‹°ë¸Œ ìŠ¤í† ë¦¬ ë©”ì´ì»¤</p>
            </div>
          </a>

          <!-- ë„¤ë¹„ê²Œì´ì…˜ + ì»¨íŠ¸ë¡¤ -->
          <div class="flex items-center gap-2 md:gap-3">
            <!-- ë°ìŠ¤í¬í†± ë„¤ë¹„ê²Œì´ì…˜ -->
            <nav class="main-nav hidden lg:flex items-center gap-1 flex-shrink-0">
              <a href="index.html" class="nav-link">ğŸ  í™ˆ</a>
              <button type="button" class="nav-link nav-toggle" data-menu-toggle="build">âœï¸ ë§Œë“¤ê¸° â–¾</button>
              <button type="button" class="nav-link nav-toggle" data-menu-toggle="tools">ğŸ› ï¸ ë„êµ¬ â–¾</button>
            </nav>

            <!-- í…Œë§ˆ ì„ íƒ -->
            <select id="themeSelector" class="theme-select hidden sm:block text-sm px-2 py-2 bg-white/5 border border-white/10 rounded-lg cursor-pointer hover:bg-white/10 transition flex-shrink-0">
              <option value="christmas">ğŸ„ í¬ë¦¬ìŠ¤ë§ˆìŠ¤</option>
              <option value="space">ğŸš€ ìš°ì£¼</option>
              <option value="fantasy">ğŸ§™ íŒíƒ€ì§€</option>
              <option value="school">ğŸ« í•™êµ</option>
              <option value="summer">ğŸ–ï¸ ì—¬ë¦„</option>
              <option value="autumn">ğŸ‚ ê°€ì„</option>
            </select>

            <!-- ëª¨ë“œ í† ê¸€ ë²„íŠ¼ -->
            <button id="modeToggle" class="w-10 h-10 rounded-lg bg-white/5 hover:bg-white/10 border border-white/10 flex items-center justify-center transition text-xl flex-shrink-0" title="ë¼ì´íŠ¸/ë‹¤í¬ ëª¨ë“œ ì „í™˜">
              <span class="mode-icon">ğŸŒ™</span>
            </button>

            <!-- ì‚¬ìš´ë“œ í† ê¸€ ë²„íŠ¼ -->
            <button id="soundToggle" class="w-10 h-10 rounded-lg bg-white/5 hover:bg-white/10 border border-white/10 flex items-center justify-center transition text-xl flex-shrink-0">
              <span class="sound-icon">ğŸ”Š</span>
            </button>
          </div>
        </div>

        <!-- ëª¨ë°”ì¼/íƒœë¸”ë¦¿ ë„¤ë¹„ê²Œì´ì…˜ -->
        <nav class="mobile-nav lg:hidden flex items-center gap-2 pb-3 overflow-x-auto">
          <a href="index.html" class="nav-link">ğŸ  í™ˆ</a>
          <button type="button" class="nav-link nav-toggle" data-menu-toggle="build">âœï¸ ë§Œë“¤ê¸° â–¾</button>
          <button type="button" class="nav-link nav-toggle" data-menu-toggle="tools">ğŸ› ï¸ ë„êµ¬ â–¾</button>
          <select id="themeSelectorMobile" class="theme-select-mobile sm:hidden text-sm px-2 py-1 bg-white/5 border border-white/10 rounded-lg cursor-pointer flex-shrink-0">
            <option value="christmas">ğŸ„</option>
            <option value="space">ğŸš€</option>
            <option value="fantasy">ğŸ§™</option>
            <option value="school">ğŸ«</option>
            <option value="summer">ğŸ–ï¸</option>
            <option value="autumn">ğŸ‚</option>
          </select>
        </nav>
        <div id="submenuBar" class="submenu-bar"></div>
      </div>
    </header>

    <!-- ë©”ì¸ ì½˜í…ì¸  -->
    <main class="workspace page-shell flex-1 max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-4 md:py-6 w-full">
      <section class="card fade-in">
        <div class="section-head">
          <div class="title text-xl">
            <span>â–¶ï¸</span>
            <span>ìŠ¤í† ë¦¬ ì²´í—˜</span>
          </div>
          <span class="pill">ê°€ì¥ ìµœê·¼ ìŠ¤í† ë¦¬ë¶€í„° ìë™ ë¡œë“œ</span>
        </div>
        <p class="section-sub">ì €ì¥ëœ ìŠ¤í† ë¦¬ë¥¼ ë¶ˆëŸ¬ì˜¤ê±°ë‚˜ ê³µìœ  ë§í¬ë¡œ ë°”ë¡œ ì²´í—˜í•˜ì„¸ìš”.</p>
      </section>

      <section class="card soft-card">
        <div id="playerContent">
          <!-- í”Œë ˆì´ì–´ ì½˜í…ì¸ ê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤ -->
          <div class="text-center py-12 text-slate-400">
            <div class="loading-spinner mx-auto mb-4" style="width: 50px; height: 50px; border-width: 4px;"></div>
            <p class="text-lg">ìŠ¤í† ë¦¬ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</p>
          </div>
        </div>
      </section>
    </main>

    <!-- í‘¸í„° -->
    <footer class="footer-wrapper py-6 text-center text-sm">
      <p>Â© 2025 ì¸í„°ë™í‹°ë¸Œ ìŠ¤í† ë¦¬ ë©”ì´ì»¤ Â· êµìœ¡ìš© í”„ë¡œì íŠ¸ Â· Made with â¤ï¸</p>
      <p class="mt-2">
        <a href="https://litt.ly/aklabs" target="_blank" rel="noopener noreferrer" class="text-cyan-400 hover:text-cyan-300 transition">
          ğŸš€ AK Labs í™ˆí˜ì´ì§€ ë°©ë¬¸í•˜ê¸°
        </a>
      </p>
    </footer>
  </div>

  <script src="js/config.js"></script>
  <script src="js/theme.js"></script>
  <script src="js/sound.js"></script>
  <script src="js/utils.js"></script>
  <script src="js/storage.js"></script>
  <script src="js/spreadsheet.js"></script>
  <script src="js/player.js"></script>
  <script>
    // ìƒë‹¨ ì„œë¸Œë©”ë‰´ í† ê¸€
    (function initSubmenu(activePage = 'player') {
      const submenuBar = document.getElementById('submenuBar');
      const toggles = document.querySelectorAll('[data-menu-toggle]');
      let openKey = null;

      const menus = {
        build: [
          { href: 'editor.html', label: 'âœï¸ ìŠ¤í† ë¦¬ ë§Œë“¤ê¸°', id: 'editor' },
          { href: 'player.html', label: 'â–¶ï¸ ì²´í—˜', id: 'player' },
          { href: 'manager.html', label: 'ğŸ’¾ ë‚´ ìŠ¤í† ë¦¬', id: 'manager' }
        ],
        tools: [
          { href: 'https://storywaver.vercel.app/', label: 'ğŸ—ºï¸ ìŠ¤í† ë¦¬ ë§µ', external: true },
          { href: 'https://gemini.google.com/gem/1nW0ghsBuhUtO_O2cJo2ORGtoMJVB-t5_?usp=sharing', label: 'ğŸ§­ ìŠ¤í† ë¦¬ ì„¤ê³„ GEM', external: true }
        ]
      };

      const render = (key) => {
        if (!submenuBar) return;
        const items = menus[key] || [];
        if (!items.length) {
          submenuBar.classList.remove('show');
          submenuBar.innerHTML = '';
          return;
        }
        submenuBar.innerHTML = items.map(item => `
          <a href="${item.href}" ${item.external ? 'target="_blank" rel="noopener noreferrer"' : ''} class="nav-link ${item.id === activePage ? 'active' : ''}">
            ${item.label}
          </a>
        `).join('');
        submenuBar.classList.add('show');
      };

      toggles.forEach(btn => {
        btn.addEventListener('click', (e) => {
          e.stopPropagation();
          const key = btn.dataset.menuToggle;
          if (openKey === key) {
            submenuBar?.classList.remove('show');
            submenuBar.innerHTML = '';
            openKey = null;
            return;
          }
          openKey = key;
          render(key);
        });
      });

      document.addEventListener('click', (e) => {
        if (!submenuBar || !submenuBar.classList.contains('show')) return;
        if (e.target.closest('[data-menu-toggle]') || e.target.closest('#submenuBar')) return;
        submenuBar.classList.remove('show');
        submenuBar.innerHTML = '';
        openKey = null;
      });
    })('player');
  </script>
</body>
</html>
